<script>
  // ===== Main Application Initialization =====
  $(document).ready(function () {

    checkExistingLogin();
    initializeNavbar();

    // Check initial user state
    if (currentUser) {
      updateNavbarForLoggedInUser();
      Swal.fire({
        icon: 'success',
        title: `ยินดีต้อนรับ ${currentUser.fullname}`,
        showConfirmButton: false,
        timer: 1200,
        toast: true,
        position: 'top-end'
      });
      showPage('shop-page');
    } else {
      updateNavbarForGuestUser();
      showPage('home-page');
    }

  });
</script>